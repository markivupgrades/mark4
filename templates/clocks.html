<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Choose Your Clock</title>
  <style>
    html {
      font-size: 22px;
    }

    body {
      margin: 0;
      font-family: sans-serif;
      background: radial-gradient(circle at center, #fffbcc 0%, #ffccf9 40%, #cce5ff 80%);
      background-size: 200% 200%;
      animation: swirl 10s ease-in-out infinite;
    }

    @keyframes swirl {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .clock-form {
      background: rgba(10, 10, 10, 0.2);
      padding: 2em;
      border-radius: 12px;
      max-width: 900px;
      margin: auto;
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.4);
      transform: scale(0.98);
      filter: blur(1px);
      opacity: 0;
      animation: fadeInForm 2.5s ease 0.5s forwards;
      border: 1px solid #3a3f2c;
      min-height: 85vh; /* ADDED */
    }

    @keyframes fadeInForm {
      from {
        opacity: 0;
        transform: scale(0.98);
        filter: blur(2px);
      }
      to {
        opacity: 1;
        transform: scale(1);
        filter: blur(0);
      }
    }

    .clock-form h2 {
      text-align: center;
      margin-bottom: 1em;
      color: white;
      font-size: 2.6em;
    }

    .clock-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1em;
    }

    .clock-button {
      background: #e9f0f7;
      border: 1px solid #888;
      padding: 0.5em 0.8em;
      border-radius: 8px;
      text-align: center;
      cursor: pointer;
      transition: background 0.3s;
      font-size: 1.68em;
      line-height: 1;
      height: 140px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      box-sizing: border-box;
      align-items: center;
      text-decoration: none;
      color: inherit;
    }

    a.clock-button {
      height: 140px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .clock-button:hover {
      background: #d0e4f2;
    }

    .emoji {
      font-size: 2em;
      margin-bottom: 0.2em;
    }

    #clockDuration {
      color: #606060;
      font-size: 1.6em;
      width: 2.8em; /* UPDATED */
      text-align: center; /* CENTERED */
      vertical-align: middle; /* BETTER ALIGNMENT */
    }

    body.poof-active {
      padding: 0 !important;
      overflow: hidden;
    }

    #poofOverlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: black;
      color: gray;
      z-index: 10000;
      font-family: monospace, monospace;
      font-size: 4rem;
      font-weight: bold;
      text-align: center;
      user-select: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    #poofOverlay .poof-text {
      line-height: 1;
    }

    #poofOverlay .poof-emoji {
      font-size: 6rem;
      margin-top: 0.5em;
    }
  </style>
</head>
<body>
  <div class="clock-form">
    <h2>Select a Clock Style</h2>
    <div class="clock-grid">
      <button class="clock-button" onclick="launchClock('RolexWOOD')"><span class="emoji">ðŸªµ</span>Wood</button>
      <button class="clock-button" onclick="launchClock('RolexBLUEDIAMOND')"><span class="emoji">ðŸ’Ž</span>Blue Diamond</button>
      <button class="clock-button" onclick="launchClock('PalmPilot')"><span class="emoji">ðŸŒ´</span>Palm</button>
      <button class="clock-button" onclick="launchClock('RolexCRAZY')"><span class="emoji">ðŸ«§</span>Bubbles</button>
      <button class="clock-button" onclick="launchClock('RolexGOLD')"><span class="emoji">ðŸ¥‡</span>Gold</button>
      <button class="clock-button" onclick="launchClock('RolexBLUE')"><span class="emoji">ðŸ”µ</span>Blue Metal</button>
      <button class="clock-button" onclick="launchClock('Rolex1908')"><span class="emoji">ðŸ“œ</span>1908</button>
      <button class="clock-button" onclick="launchClock('PatekRotate')"><span class="emoji">âŒš</span>Patek Philippe</button>
      <button class="clock-button" onclick="launchClock('PlainClock')"><span class="emoji">ðŸ•“</span>Basic</button>
      <button class="clock-button" onclick="goToMessage()"><span class="emoji">ðŸ’¬</span>Message</button>
      <button class="clock-button" onclick="goToBillboard()"><span class="emoji">ðŸª§</span>Billboard</button>
      <a href="/" class="clock-button" onclick="showPoof(event)"><span class="emoji">â›”</span>CANCEL</a>
    </div>

<div id="messageOptions" style="display: none; margin-top: 2em; text-align: center;">
  <label for="presetMessage" style="font-size: 1.6em; color: white;">Choose a message:</label><br>
  <select id="presetMessage" onchange="toggleCustomMessage()" style="font-size: 1.4em; padding: 0.4em; border-radius: 6px;">
    <option value="You should probably get going.">You should probably get going.</option>
    <option value="It's time to care.">It's time to care.</option>
    <option value="Where has the day gone?">Where has the day gone?</option>
    <option value="No need to stare.">No need to stare.</option>
    <option value="Good day all!">Good day all!</option>
    <option value="South Burlington Local Time">South Burlington Local Time</option>
    <option value="Is it time yet?">Is it time yet?</option>
    <option value="Hi yo! I got plenty of time!">Hi yo! I got plenty of time!</option>
    <option value="Do you find this happens all the time?">Do you find this happens all the time?</option>
    <option value="It's probably about time.">It's probably about time.</option>
    <option value="Look at these hands, Jerry!">Look at these hands, Jerry!</option>
    <option value="Custom">Custom...</option>
  </select>

  <div id="customMessageContainer" style="margin-top: 1em; display: none;">
    <input type="text" id="customMessage" placeholder="Type your message..." style="font-size: 1.4em; padding: 0.4em; border-radius: 6px; width: 60%;">
  </div>
</div>


<!-- CLOCK DURATION RADIO BUTTONS -->
<div style="margin-top: 5em; text-align: center; color: white;">
  <span style="font-size: 2.1em;">Clock exits after:</span><br><br>
  <div style="display: flex; justify-content: center; gap: 1.2em; flex-wrap: wrap; font-size: 1.4em;">
    <label><input type="radio" name="duration" value="5" onclick="setDuration(5)"> 5 min</label>
    <label><input type="radio" name="duration" value="10" onclick="setDuration(10)"> 10 min</label>
    <label><input type="radio" name="duration" value="15" onclick="setDuration(15)"> 15 min</label>
    <label><input type="radio" name="duration" value="30" onclick="setDuration(30)" checked> 30 min</label>
  </div>
  <input type="hidden" id="clockDuration" value="30">
</div>


  <!-- *POOF* OVERLAY -->
  <div id="poofOverlay">
    <div class="poof-text">*poof*</div>
    <div class="poof-emoji">ðŸ’­</div>
  </div>

  <!-- JAVASCRIPT -->
<script>
  function launchClock(name) {
    const duration = document.getElementById('clockDuration').value;
    let message = '';

    if (name === 'ClockText' || name === 'Message2') {
      const preset = document.getElementById('presetMessage').value;
      message = preset === 'Custom' ? document.getElementById('customMessage').value : preset;
    }

    const encodedMessage = encodeURIComponent(message);
    window.location.href = `/launch/${name}?duration=${duration}&message=${encodedMessage}`;
  }

  function toggleCustomMessage() {
    const preset = document.getElementById('presetMessage').value;
    const customContainer = document.getElementById('customMessageContainer');
    customContainer.style.display = preset === 'Custom' ? 'block' : 'none';
  }

  document.querySelectorAll('.clock-button').forEach(button => {
    button.addEventListener('click', () => {
      const name = button.getAttribute('onclick')?.match(/launchClock\('(.+?)'\)/)?.[1];
      const showMessageOptions = name === 'ClockText' || name === 'Message2';
      document.getElementById('messageOptions').style.display = showMessageOptions ? 'block' : 'none';
    });
  });

   function goToMessage() {
     const duration = document.getElementById('clockDuration').value;
     window.location.href = `/message?duration=${duration}`;
   }

   function goToBillboard() {
     const duration = document.getElementById('clockDuration').value;
     window.location.href = `/billboard?duration=${duration}`;
   }

   function setDuration(val) {
     document.getElementById('clockDuration').value = val;
   }

  function showPoof(e) {
  e.preventDefault();
  document.body.classList.add('poof-active'); // âœ… Remove padding
  const poof = document.getElementById('poofOverlay');
  poof.style.display = 'flex';

  fetch('/cancel', { method: 'GET' })
    .then(() => {
      setTimeout(() => {
        window.location.href = '/';
      }, 400);
    });
}


</script>

</body>
</html>
